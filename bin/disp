#!/bin/bash

MONITOR=$(xrandr | nice grep ' connected ' | awk '{print $1}' | tail -n 1)
NATIVE=$(xrandr | nice grep ' connected ' | awk '{print $1}' | head -n 1)


reload() {
    /root/.fehbg
    /root/dots/config/polybar/start.sh
}

trap reload EXIT

case "$1" in
    left)
        SIDE="--left-of"
        ;;
    right)
        SIDE="--right-of"
        ;;
    mirror)
        SIDE="--reflect"
        ;;
    off)
        xrandr --output ${MONITOR} --off
        exit 0
        ;;
    *)
        SIDE="--right-of"
        ;;
esac

case "$2" in
    rotate)
        ROTATE="--rotate right"
        ;;
    *)
        ROTATE=""
        ;;
esac

xrandr --output ${MONITOR} ${ROTATE} --auto ${SIDE} ${NATIVE}

